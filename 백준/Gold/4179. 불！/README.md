# [Gold III] ë¶ˆ! - 4179 

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/4179) 

### ë¶„ë¥˜

ë„ˆë¹„ ìš°ì„  íƒìƒ‰, ê·¸ë˜í”„ ì´ë¡ , ê·¸ë˜í”„ íƒìƒ‰

### ë¬¸ì œ ì„¤ëª…

<p>ì§€í›ˆì´ëŠ” ë¯¸ë¡œì—ì„œ ì¼ì„ í•œë‹¤. ì§€í›ˆì´ë¥¼ ë¯¸ë¡œì—ì„œ íƒˆì¶œí•˜ë„ë¡ ë„ì™€ì£¼ì!</p>

<p>ë¯¸ë¡œì—ì„œì˜ ì§€í›ˆì´ì˜ ìœ„ì¹˜ì™€ ë¶ˆì´ ë¶™ì€ ìœ„ì¹˜ë¥¼ ê°ì•ˆí•´ì„œ ì§€í›ˆì´ê°€ ë¶ˆì— íƒ€ê¸°ì „ì— íƒˆì¶œí•  ìˆ˜ ìˆëŠ”ì§€ì˜ ì—¬ë¶€, ê·¸ë¦¬ê³  ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ íƒˆì¶œí•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ê²°ì •í•´ì•¼í•œë‹¤.</p>

<p>ì§€í›ˆì´ì™€ ë¶ˆì€ ë§¤ ë¶„ë§ˆë‹¤ í•œì¹¸ì”© ìˆ˜í‰ë˜ëŠ” ìˆ˜ì§ìœ¼ë¡œ(ë¹„ìŠ¤ë“¬í•˜ê²Œ ì´ë™í•˜ì§€ ì•ŠëŠ”ë‹¤)  ì´ë™í•œë‹¤. </p>

<p>ë¶ˆì€ ê° ì§€ì ì—ì„œ ë„¤ ë°©í–¥ìœ¼ë¡œ í™•ì‚°ëœë‹¤. </p>

<p>ì§€í›ˆì´ëŠ” ë¯¸ë¡œì˜ ê°€ì¥ìë¦¬ì— ì ‘í•œ ê³µê°„ì—ì„œ íƒˆì¶œí•  ìˆ˜ ìˆë‹¤. </p>

<p>ì§€í›ˆì´ì™€ ë¶ˆì€ ë²½ì´ ìˆëŠ” ê³µê°„ì€ í†µê³¼í•˜ì§€ ëª»í•œë‹¤.</p>

### ì…ë ¥ 

 <p>ì…ë ¥ì˜ ì²«ì§¸ ì¤„ì—ëŠ” ê³µë°±ìœ¼ë¡œ êµ¬ë¶„ëœ ë‘ ì •ìˆ˜ Rê³¼ Cê°€ ì£¼ì–´ì§„ë‹¤. ë‹¨, 1 â‰¤ R, C â‰¤ 1000 ì´ë‹¤. Rì€ ë¯¸ë¡œ í–‰ì˜ ê°œìˆ˜, CëŠ” ì—´ì˜ ê°œìˆ˜ì´ë‹¤.</p>

<p>ë‹¤ìŒ ì…ë ¥ìœ¼ë¡œ Rì¤„ë™ì•ˆ ê°ê°ì˜ ë¯¸ë¡œ í–‰ì´ ì£¼ì–´ì§„ë‹¤.</p>

<p> ê°ê°ì˜ ë¬¸ìë“¤ì€ ë‹¤ìŒì„ ëœ»í•œë‹¤.</p>

<ul>
	<li>#: ë²½</li>
	<li>.: ì§€ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ê³µê°„</li>
	<li>J: ì§€í›ˆì´ì˜ ë¯¸ë¡œì—ì„œì˜ ì´ˆê¸°ìœ„ì¹˜ (ì§€ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ê³µê°„)</li>
	<li>F: ë¶ˆì´ ë‚œ ê³µê°„</li>
</ul>

<p>JëŠ” ì…ë ¥ì—ì„œ í•˜ë‚˜ë§Œ ì£¼ì–´ì§„ë‹¤.</p>

### ì¶œë ¥ 

 <p>ì§€í›ˆì´ê°€ ë¶ˆì´ ë„ë‹¬í•˜ê¸° ì „ì— ë¯¸ë¡œë¥¼ íƒˆì¶œ í•  ìˆ˜ ì—†ëŠ” ê²½ìš° IMPOSSIBLE ì„ ì¶œë ¥í•œë‹¤.</p>

<p>ì§€í›ˆì´ê°€ ë¯¸ë¡œë¥¼ íƒˆì¶œí•  ìˆ˜ ìˆëŠ” ê²½ìš°ì—ëŠ” ê°€ì¥ ë¹ ë¥¸ íƒˆì¶œì‹œê°„ì„ ì¶œë ¥í•œë‹¤. </p>



#  ğŸš€  ì˜¤ë‹µë…¸íŠ¸ 

```diff
import java.util.*;
import java.io.*;

class Node{
    int x, y, step;
    
    public Node(int x, int y, int step){
        this.x=x;
        this.y=y;
        this.step=step;
    }
}

public class Main {
    public static int N, M;
    public static int answer = 0;
    public static char[][] grid;
    public static int[][] steps;
    public static int[][] jsteps;
    public static boolean[][] visited;
    public static int[] dx = {0,0,-1,1};
    public static int[] dy = {-1,1,0,0};
    public static Queue<Node> q = new LinkedList<>();
    
    public static void main(String[] args) throws IOException{
        // ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        
        String[] input = br.readLine().split(" ");
        
        N = Integer.valueOf(input[0]);
        M = Integer.valueOf(input[1]);
        
        grid = new char[N][M];
        steps = new int[N][M];
        visited = new boolean[N][M];
        
+        for(int i=0; i<N; i++){
+            Arrays.fill(steps[i], 1000000);
+        }
+        
        int j_x = 0;
        int j_y = 0;
        
        for(int i=0; i<N; i++){
            input = br.readLine().split("");
            for(int j=0; j<M; j++){
                grid[i][j] = input[j].charAt(0);
                
                if(grid[i][j] == 'J'){
                    j_x = i;
                    j_y = j;
                }
                
                if(grid[i][j] == 'F'){
                    visited[i][j] = true;
+                    steps[i][j] = 0;
                    q.add(new Node(i, j, 0));
                }
            }
        }
        
        // ë¶ˆ ë¨¼ì € bfs
        BFS();
        
        // for(int i=0; i<N; i++){
            // for(int j=0; j<M; j++){
                // System.out.print(steps[i][j] + " ");
            // }
            // System.out.println();
        // }
        // System.out.println();
        
        // ì§€í›ˆì´ bfs
        JBFS(j_x, j_y);
        
        // for(int i=0; i<N; i++){
            // for(int j=0; j<M; j++){
                // System.out.print(jsteps[i][j] + " ");
            // }
            // System.out.println();
        // }
        
        System.out.println(answer == 0 ? "IMPOSSIBLE" : answer);
        
    }
    
    
    public static void JBFS(int x, int y){
        q = new LinkedList<>();
        visited = new boolean[N][M];
        visited[x][y] = true;
        q.add(new Node(x, y, 0));
        
        jsteps = new int[N][M];
        
        while(!q.isEmpty()){
            Node cur = q.poll();
            
            for(int i=0; i<4; i++){
                int nx = cur.x + dx[i];
                int ny = cur.y + dy[i];
                
                // íƒˆì¶œ ì²´í¬
                if(escape(nx, ny)){
                    answer = cur.step+1;
                    return;
                }
                
                if(JcanGO(nx, ny, cur.step+1)){
                    visited[nx][ny] = true;
                    jsteps[nx][ny] = cur.step+1;
                    q.add(new Node(nx, ny, cur.step+1));
                }
                
            }
        }
        
    }
    
    // 0>nx || nx <=N || 0>ny || ny<=M
    public static boolean escape(int x, int y){
        if(inRange(x, y)) return false;
        return true;
    }
    
    public static boolean JcanGO(int x, int y, int step){
        if(!inRange(x, y)) return false;
        if(grid[x][y] == '#' || visited[x][y]) return false;
        if(steps[x][y] <= step) return false;
        return true; 
    }
    
    
    // ë¶ˆ
    public static boolean inRange(int x, int y){
        return (0<=x && x<N && 0<=y && y<M);
    }
    
    public static boolean canGo(int x, int y){
        if(!inRange(x, y)) return false;
        if(grid[x][y] == '#' || visited[x][y]) return false;
        return true;
    }
    
    public static void BFS(){
        while(!q.isEmpty()){
            Node cur = q.poll();
            
            for(int i=0; i<4; i++){
                int nx = cur.x + dx[i];
                int ny = cur.y + dy[i];
                
                if(canGo(nx, ny)){
                    visited[nx][ny] = true;
-                    steps[nx][ny] = steps[cur.x][cur.y] + 1;
+                    steps[nx][ny] = cur.step+1;
                    q.add(new Node(nx, ny, cur.step+1));
                }
            }
        }
    }
}

```


 ## ğŸ† ì „ì²´ ì½”ë©˜íŠ¸ 

1. ì¼ë‹¨ ë¶ˆ ë¨¼ì € ì´ë™ ì‹œí‚¤ê³  ê·¸ stepsë¥¼ ì €ì¥í•´ë‘”ë‹¤ (ë²½ ë•Œë¬¸ì— stepë“¤ì´ 0ìœ¼ë¡œ ë˜ëŠ” ê²½ìš° JcanGoì—ì„œ "ì´í•˜" ì¡°ê±´ì— ìœ„ë°°ë¨ìœ¼ë¡œ ì „ë¶€ í° ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•´ì•¼í•œë‹¤!)
2. ì§€í›ˆì´ë¥¼ ì´ë™ì‹œí‚¤ëŠ”ë° ë¶ˆì´ ì´ë™í•œ stepë³´ë‹¤ ì´í•˜ì´ë©´ ì´ë¯¸ ë¶ˆì´ í¼ì§„ ìƒíƒœì´ë¯€ë¡œ ì´ë™ x,
ê·¸ë¦¬ê³  ë‹¤ìŒ stepì´ grid ë°–ì´ë©´ íƒˆì¶œì´ë‹¤.
